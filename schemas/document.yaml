type: object
definitions:
  boolean: &boolean
    type: boolean
  boolean_true: &boolean_true
    type: string
    pattern: ^t$
  short_label: &short_label
    type: string
    minLength: 1
    maxLength: 64
  long_label: &long_label
    type: string
    minLength: 1
    maxLength: 128
  uri: &uri
    type: string
    format: uri
  location: &location
    type: array
    minItems: 2
    maxItems: 2
    items:
      - type: number
        description: Latitude
        minimum: -90
        maximum: 90
      - type: number
        description: Longitude
        minimum: -180
        maximum: 180
  osm: &osm
    type: object
    minProperties: 1
    additionalProperties: false
    properties:
      relation:
        oneOf:
          - type: number
          - type: array
            minItems: 1
            items:
              type: number
      way:
        type: number
      node:
        type: number
  photo: &photo
    type: object
    required:
      - src
      - license
      - attr
    additionalProperties: false
    properties:
      src: *uri
      href: *uri
      license: *short_label
      attr: *short_label
      year:
        type: number
      feature:
        type: string
        pattern: ^t$
  links: &links
    type: object
    minProperties: 1
    additionalProperties: false
    properties:
      official: *uri
      wikipedia: *uri
      wikivoyage: *uri
  infrastructure: &infrastructure
    type: array
    minItems: 1
    items: &infrastructure_items
      type: object
      minProperties: 1
      additionalProperties: false
      properties: &infrastructure_properties
        name: *long_label
        location: *location
        osm: *osm
        photos:
          type: array
          minItems: 1
          maxItems: 3
          items: *photo
required:
  - name
  - location
  - copyright
  - license
additionalProperties: false
properties:
  draft: *boolean_true
  name: *long_label
  park: *long_label
  region: *short_label
  country: *short_label
  location: *location
  osm: *osm
  iucn:
    type: string
    description: https://www.iucn.org/theme/protected-areas/about/protected-area-categories
    pattern: ^(Ia|Ib|II|III|IV|V|VI)$
  nearest_town:
    type: object
    required:
      - name
      - location
    additionalProperties: false
    properties:
      name: *long_label
      location: *location
      links: *links
  photos:
    type: array
    minItems: 1
    maxItems: 12
    items: *photo
  features:
    type: object
    minProperties: 1
    additionalProperties: false
    properties:
      mountain_peak: *boolean
      rainforest: *boolean
      waterfall: *boolean
      canyon: *boolean
      cliff_edges: *boolean
      stairs: *boolean
      walking: *boolean
      cycling: *boolean
      mountain_biking: *boolean
      slippery: *boolean
      flood_risk: *boolean
      water_crossing: *boolean
      water_crossing_with_stepping_stones: *boolean
      loop: *boolean
      lookout: *boolean
      tree_fall_risk: *boolean
      allocated_campsites: *boolean
      showers: *boolean
      tables: *boolean
      rubbish_bins: *boolean
      beach: *boolean
      unesco_world_heritage: *boolean
      booking_required: *boolean
      drive_in_campsites: *boolean
      national_park: *boolean
      sandy_track: *boolean
      dirt_track: *boolean
      gravel_track: *boolean
      sealed_surface: *boolean
      rail_trail: *boolean
  restrictions:
    type: object
    minProperties: 1
    additionalProperties: false
    properties:
      hikers_only: *boolean
      dogs: *boolean
      dogs_off_leash: *boolean
      smoking: *boolean
      amplified_music: *boolean
      generators: *boolean
      gathering_firewood: *boolean
      camping: *boolean
      campfires: *boolean
      drive_in: *boolean
      horses: *boolean
      bicycles: *boolean
      motorbikes: *boolean
      vehicles: *boolean
      firearms: *boolean
  accessibility:
    type: object
    minProperties: 1
    additionalProperties: false
    properties:
      short_walk: *boolean
      stroller: *boolean
      wheelchair: *boolean
  getting_there:
    type: object
    minProperties: 1
    additionalProperties: false
    properties:
      hike_in: *boolean
      public_transport: *boolean
      car: *boolean
      4x4: *boolean
      sealed_road: *boolean
      causeway: *boolean
      motorcycle: *boolean
      mountain_bike: *boolean
      road_bicycle: *boolean
      boat: *boolean
  toilets:
    <<: *infrastructure
    items:
      <<: *infrastructure_items
      properties:
        <<: *infrastructure_properties
        type:
          type: string
          pattern: ^(flush|pit)$
        accessible: *boolean
  water:
    <<: *infrastructure
    items:
      <<: *infrastructure_items
      properties:
        <<: *infrastructure_properties
        type:
          type: string
          pattern: ^(natural|tap|drinking_fountain|well|pump)$
        source:
          type: string
          pattern: ^(pipe|tank|river|dam|lake|spring)$
        potable: *boolean
        treated: *boolean
  transport:
    <<: *infrastructure
    items:
      <<: *infrastructure_items
      properties:
        <<: *infrastructure_properties
        type:
          type: string
          pattern: ^(train|bus)$
  parking:
    <<: *infrastructure
    items:
      <<: *infrastructure_items
      properties:
        <<: *infrastructure_properties
        time_limit: *boolean
        fee: *boolean
        sealed_surface: *boolean
  shelter:
    <<: *infrastructure
    items:
      <<: *infrastructure_items
      properties:
        <<: *infrastructure_properties
        picnic_table: *boolean
  park_office:
    <<: *infrastructure
    items:
      <<: *infrastructure_items
      properties:
        <<: *infrastructure_properties
  visitor_centre:
    <<: *infrastructure
    items:
      <<: *infrastructure_items
      properties:
        <<: *infrastructure_properties
  fees:
    type: array
    minItems: 1
  links: *links
  attractions:
    type: array
    items:
      type: string
  routes:
    type: array
    items:
      type: string
  campsites:
    type: array
    items:
      type: string
  copyright:
    type: array
    minLength: 1
    items: *short_label
  license:
    type: string
    minLength: 1
    pattern: ^CC BY\-NC\-SA 4\.0$
